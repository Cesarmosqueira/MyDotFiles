import PlugModule from 'plug-module';
import * as shortcut from './shortcut';

const mod = new PlugModule('shortcut');

mod.createMethod('registerShortcut', shortcut.register);
mod.createMethod('unregisterShortcut', shortcut.unregister);
mod.createMethod('isShortcutRegistered', shortcut.isRegistered);
mod.addMethod('onShortcutPressed', shortcut.onShortcutPressed);
mod.injectMethodsToGlobal();

mod.addMainBootstrapper(bootstrap);

function bootstrap(config) {
    if (!config.shortcut) {
        return;
    }

    plug.ready(() => {
        for (let eventName in config.shortcut.global) {
            plug.registerShortcut(eventName, config.shortcut.global[eventName], 'global');
        }

        for (let eventName in config.shortcut.local) {
            plug.registerShortcut(eventName, config.shortcut.local[eventName], 'local');
        }
    });
}

export default mod.exportModule();