import electron from 'electron';
import PlugModule from 'plug-module';
import PlugMenu from '../plug-menu';

const mod = new PlugModule('appMenu');
const appMenu = new PlugMenu('app');

mod.createMethod('useAppMenu', appMenu.use.bind(appMenu));
mod.createMethod('getAppMenuItemById', appMenu.getMenuItemById.bind(appMenu));
mod.createMethod('updateAppMenuItemById', appMenu.updateMenuItemById.bind(appMenu));
mod.addMethod('onAppMenuClick', appMenu.onMenuClick.bind(appMenu));
mod.injectMethodsToGlobal();

mod.addMainBootstrapper(bootstrap);

function bootstrap(config) {
    appMenu.bootstrap(config.appMenu, menu => electron.Menu.setApplicationMenu(menu));
}

export default mod.exportModule();